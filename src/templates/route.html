<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>{{ route.title }}</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <div class="wrap">
    <header>
      <h1>{{ route.title }}</h1>
      <p class="sub">(Edit directly - auto saves)</p>
    </header>

    <div class="top-actions">
      <button id="add-stop" class="btn">Add Stop</button>
      <button id="reset-route" class="btn reset">Reset Delays</button>
      <a href="/" class="btn grey">Back</a>
    </div>

    <form id="route-form">
      <div class="timeline">

        <div class="start-icon"></div>

        {% for stop in stops %}
        <div class="stop-row" data-index="{{ loop.index0 }}">
          <div class="line-area"><div class="line-dot"></div></div>

          <div class="right-card">
            <div class="stop-name">{{ stop.name }}</div>

            <div class="meta">
              <span class="updated-time">{{ stop.time }}</span>
              <span class="delay-label">(+{{ stop.delay }} min)</span>
            </div>

            <div class="edit-row">
              <input type="text" data-field="name" value="{{ stop.name }}">
              <input type="time" data-field="time" value="{{ stop.time }}">
              <input type="number" data-field="delay" value="{{ stop.delay }}">
            </div>

            <div class="edit-buttons">
              <button data-action="sub" class="small-btn">-1</button>
              <button data-action="add" class="small-btn">+1</button>
              <button data-action="delete" class="small-btn del">Delete</button>
            </div>

          </div>
        </div>
        {% endfor %}

        <div class="end-icon"></div>

      </div>
    </form>

    <div class="note">Edits autosave (routes.json)</div>
  </div>

  <script src="{{ url_for('static', filename='route.js') }}"></script>
</body>
</html>
